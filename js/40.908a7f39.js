(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"./src/models/account.js":function(t,e,n){"use strict";n.r(e);var a=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(a),s=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),o=n.n(s),u=n("./src/utils/request.js");e.default={state:{token:localStorage.getItem("token"),userData:function(){var t=localStorage.getItem("userData");try{t=JSON.parse(t)||{}}catch(e){t={}}return t}(),loading:!1,message:""},reducers:{updateState:function(t,e){return Object.assign({},t,e)}},effects:{login:function(t){var e=this,n=t.username,a=t.password;return o()(r.a.mark(function t(){var s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.updateState({loading:!0}),t.next=3,Object(u.a)("/api/user/login",{method:"POST",body:{username:n,password:a}});case 3:(s=t.sent)&&e.updateState({userData:s,token:s.token}),e.updateState({loading:!1});case 6:case"end":return t.stop()}},t,this)}))()},logout:function(){return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.a)("/api/user/logout",{method:"DELETE"});case 2:case"end":return t.stop()}},t,this)}))()},verify:function(){var t=this;return o()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)("/api/user/verify");case 2:(n=e.sent)&&t.updateState({userData:n,token:n.token});case 4:case"end":return e.stop()}},e,this)}))()}}}},"./src/utils/request.js":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var a=n("./node_modules/axios/index.js"),r=n.n(a),s=n("./node_modules/uiw/lib/index.js"),o=n("./src/history.js"),u=n("./src/utils/utils.js"),i={200:"服务器成功返回请求的数据。",201:"新建或修改数据成功。",202:"一个请求已经进入后台排队（异步任务）。",204:"删除数据成功。",400:"发出的请求有错误，服务器没有进行新建或修改数据的操作。",401:"用户没有权限（令牌、用户名、密码错误）。",403:"用户得到授权，但是访问是被禁止的。",404:"发出的请求针对的是不存在的记录，服务器没有进行操作。",406:"请求的格式不可得。",410:"请求的资源被永久删除，且不会再得到的。",422:"当创建一个对象时，发生一个验证错误。",500:"服务器发生错误，请检查服务器。",502:"网关错误。",503:"服务不可用，服务器暂时过载或维护。",504:"网关超时。"};function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.method||"GET",a={url:t,method:n,data:e.body,headers:{"Content-Type":"application/json; charset=utf-8",Accept:"application/json"}};return e.headers&&(a.headers=Object.assign({},a.headers,e.headers)),/(GET|DELETE)/.test(n)&&(a.url=Object(u.b)(t,Object.assign({},e.body)),delete a.body),r.a.request(a).then(function(t){return t.data}).catch(function(t){var e=t.response,n="string"==typeof e.data?e.data:"string"==typeof e.data.message?e.data.message:void 0;if(e.status>=200&&e.status<300)return e;if(401===e.status&&"/login"!==location.pathname)return s.Message.error(e.data?n:"请求失败！",{duration:4}),o.a.push("/login"),e.data;if(403!==e.status)if(e.status<=504&&e.status>=500)o.a.push("/exception/500");else if(e.status>=404&&e.status<422)o.a.push("/exception/404");else{var a=n||i[e.status]||e.statusText;if(!a){var r=new Error(a);if(r.name=e.status,r.response=e,e.data)return e.data;throw r}s.Notification.error({message:"错误提示：",description:a})}else o.a.push("/exception/403")})}},"./src/utils/utils.js":function(t,e,n){"use strict";function a(t,e){var n=t,a=[];return Object.keys(e).forEach(function(t){return a.push("".concat(t,"=").concat(e[t]))}),0===Object.keys(e).length?t:(!1===/\?/.test(n)?n="".concat(n,"?").concat(a.join("&")):n+="&".concat(a.join("&")),n)}function r(t){var e=t.split("/").filter(function(t){return t});return e.map(function(t,n){return{name:t,path:"/".concat(e.slice(0,n+1).join("/"))}})}function s(t){if(0===t)return"0 B";var e=Math.floor(Math.log(t)/Math.log(1e3)),n=(t/Math.pow(1e3,e)).toPrecision(3);return"".concat(parseFloat(n)," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e])}n.d(e,"b",function(){return a}),n.d(e,"c",function(){return r}),n.d(e,"a",function(){return s})}}]);