(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"./src/models/account.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.account=void 0;var n=u(r("./node_modules/babel-runtime/regenerator/index.js")),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=u(r("./src/utils/request.js"));function u(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,s){try{var u=t[a](s),o=u.value}catch(e){return void r(e)}if(!u.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}t.account={state:{token:localStorage.getItem("token"),userData:function(){var e=localStorage.getItem("userData");try{e=JSON.parse(e)||{}}catch(t){e={}}return e}(),loading:!1,message:""},reducers:{updateState:function(e,t){return a({},e,t)}},effects:{login:function(e){var t=this,r=e.username,a=e.password;return o(n.default.mark(function e(){var u;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.updateState({loading:!0}),e.next=3,(0,s.default)("/api/user/login",{method:"POST",body:{username:r,password:a}});case 3:(u=e.sent)&&t.updateState({userData:u,token:u.token}),t.updateState({loading:!1});case 6:case"end":return e.stop()}},e,t)}))()},logout:function(){var e=this;return o(n.default.mark(function t(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.default)("/api/user/logout",{method:"DELETE"});case 2:case"end":return e.stop()}},t,e)}))()},verify:function(){var e=this;return o(n.default.mark(function t(){var r;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.default)("/api/user/verify");case 2:(r=t.sent)&&e.updateState({userData:r,token:r.token});case 4:case"end":return t.stop()}},t,e)}))()}}}},"./src/utils/request.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.method||"GET",i={url:e,method:r,data:t.body,headers:{"Content-Type":"application/json; charset=utf-8",Accept:"application/json"}};t.headers&&(i.headers=n({},i.headers,t.headers));/(GET|DELETE)/.test(r)&&(i.url=(0,o.splitUrl)(e,n({},t.body)),delete i.body);return a.default.request(i).then(function(e){return e.data}).catch(function(e){var t=e.response,r="string"==typeof t.data?t.data:"string"==typeof t.data.message?t.data.message:void 0;if(t.status>=200&&t.status<300)return t;if(401===t.status&&"/login"!==location.pathname)return s.Message.error(t.data?r:"请求失败！",{duration:4}),u.default.push("/login"),t.data;if(403!==t.status)if(t.status<=504&&t.status>=500)u.default.push("/exception/500");else if(t.status>=404&&t.status<422)u.default.push("/exception/404");else{var n=r||c[t.status]||t.statusText;if(!n){var a=new Error(n);if(a.name=t.status,a.response=t,t.data)return t.data;throw a}s.Notification.error({message:"错误提示：",description:n})}else u.default.push("/exception/403")})};var a=i(r("./node_modules/axios/index.js")),s=r("./node_modules/uiw/lib/index.js"),u=i(r("./src/history.js")),o=r("./src/utils/utils.js");function i(e){return e&&e.__esModule?e:{default:e}}var c={200:"服务器成功返回请求的数据。",201:"新建或修改数据成功。",202:"一个请求已经进入后台排队（异步任务）。",204:"删除数据成功。",400:"发出的请求有错误，服务器没有进行新建或修改数据的操作。",401:"用户没有权限（令牌、用户名、密码错误）。",403:"用户得到授权，但是访问是被禁止的。",404:"发出的请求针对的是不存在的记录，服务器没有进行操作。",406:"请求的格式不可得。",410:"请求的资源被永久删除，且不会再得到的。",422:"当创建一个对象时，发生一个验证错误。",500:"服务器发生错误，请检查服务器。",502:"网关错误。",503:"服务不可用，服务器暂时过载或维护。",504:"网关超时。"}},"./src/utils/utils.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitUrl=function(e,t){var r=e,n=[];return Object.keys(t).forEach(function(e){return n.push(e+"="+t[e])}),0===Object.keys(t).length?e:(!1===/\?/.test(r)?r=r+"?"+n.join("&"):r+="&"+n.join("&"),r)}}}]);