(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"./src/models/account.js":function(t,e,a){"use strict";a.r(e);var n=a("./node_modules/@babel/runtime/regenerator/index.js"),s=a.n(n),r=a("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),o=a.n(r),u=a("./src/utils/request.js");e.default={state:{token:localStorage.getItem("token"),userData:function(){var t=localStorage.getItem("userData");try{t=JSON.parse(t)||{}}catch(e){t={}}return t}(),loading:!1,message:""},reducers:{updateState:function(t,e){return Object.assign({},t,e)}},effects:{login:function(t){var e=this,a=t.username,n=t.password;return o()(s.a.mark(function t(){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.updateState({loading:!0}),t.next=3,Object(u.a)("/api/user/login",{method:"POST",body:{username:a,password:n}});case 3:(r=t.sent)&&e.updateState({userData:r,token:r.token}),e.updateState({loading:!1});case 6:case"end":return t.stop()}},t,this)}))()},logout:function(){return o()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.a)("/api/user/logout",{method:"DELETE"});case 2:case"end":return t.stop()}},t,this)}))()},verify:function(){var t=this;return o()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)("/api/user/verify");case 2:(a=e.sent)&&t.updateState({userData:a,token:a.token});case 4:case"end":return e.stop()}},e,this)}))()}}}},"./src/utils/request.js":function(t,e,a){"use strict";var n=a("./node_modules/axios/index.js"),s=a.n(n),r=a("./node_modules/uiw/lib/index.js"),o=a("./src/history.js");a.d(e,"a",function(){return i});var u={200:"服务器成功返回请求的数据。",201:"新建或修改数据成功。",202:"一个请求已经进入后台排队（异步任务）。",204:"删除数据成功。",400:"发出的请求有错误，服务器没有进行新建或修改数据的操作。",401:"用户没有权限（令牌、用户名、密码错误）。",403:"用户得到授权，但是访问是被禁止的。",404:"发出的请求针对的是不存在的记录，服务器没有进行操作。",406:"请求的格式不可得。",410:"请求的资源被永久删除，且不会再得到的。",422:"当创建一个对象时，发生一个验证错误。",500:"服务器发生错误，请检查服务器。",502:"网关错误。",503:"服务不可用，服务器暂时过载或维护。",504:"网关超时。"};function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.method||"GET",n={url:t,method:a,data:e.body,headers:{"Content-Type":"application/json; charset=utf-8",Accept:"application/json"}};return e.headers&&(n.headers=Object.assign({},n.headers,e.headers)),/(GET|DELETE)/.test(a)&&(n.url=function(t,e){var a=t,n=[];return Object.keys(e).forEach(function(t){return n.push("".concat(t,"=").concat(e[t]))}),0===Object.keys(e).length?t:(!1===/\?/.test(a)?a="".concat(a,"?").concat(n.join("&")):a+="&".concat(n.join("&")),a)}(t,Object.assign({},e.body)),delete n.body),s.a.request(n).then(function(t){return t.data}).catch(function(t){var e=t.response,a="string"==typeof e.data?e.data:"string"==typeof e.data.message?e.data.message:void 0;if(e.status>=200&&e.status<300)return e;if(401===e.status&&"/login"!==location.pathname)return r.Message.error(e.data?a:"请求失败！",{duration:4}),o.a.push("/login"),e.data;if(403!==e.status)if(e.status<=504&&e.status>=500)o.a.push("/exception/500");else if(e.status>=404&&e.status<422)o.a.push("/exception/404");else{var n=a||u[e.status]||e.statusText;if(!n){var s=new Error(n);if(s.name=e.status,s.response=e,e.data)return e.data;throw s}r.Notification.error({message:"错误提示：",description:n})}else o.a.push("/exception/403")})}}}]);